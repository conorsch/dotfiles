#!/usr/bin/perl
# quick script to grab NPR's Morning Edition audio file and play it;
# recommended usage is daily invocation via cronjob, so you can hear the news over breakfast;
use strict;
use warnings;
use feature 'say';
use LWP::Simple;

my $feed_url = 'http://www.npr.org/templates/rss/podlayer.php?id=129577422'; #declare RSS feed URL 
my @raw_feed = get($feed_url); #grab raw XML data via HTTP;
my $audio_file_url; #initialize variable in proper scope;
for (@raw_feed) { #loop through raw RSS feed, line by line;
    next unless /<enclosure url="(.*\.mp3)\?.*" length/; #skip line unless MP3 URL is present;
    $audio_file_url = $1; #store matched glob as URL to audio file;
    last; #break out of loop, we got what we came for;
}
exec ("mplayer \"$audio_file_url\""); #pass audio file URL to mplayer, then we're out of here;
