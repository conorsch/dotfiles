# If not running interactively, don't do anything
[[ -z "${PS1:-}" ]] && return

[[ -f ~/.bashrc ]] && source ~/.bashrc
[[ -f ~/.bash_env_extra ]] && source ~/.bash_env_extra
if [[ -z "SSH_CLIENT" ]] ; then
    if ! printenv | grep -q ^QUBES_ ; then
        source ~/.bin/ssh-agent-wrapper
    fi
fi

# bash-completions
if [[ -f /etc/bash_completion ]] ; then
    source /etc/bash_completion
elif [[ -f /usr/share/bash-completion/bash_completion ]] ; then
    source /usr/share/bash-completion/bash_completion
fi
# kubectl
if hash kubectl > /dev/null 2>&1 ; then
    source <(kubectl completion bash)
fi
# direnv
if hash direnv > /dev/null 2>&1; then
    eval "$(direnv hook bash)"
fi

# asdf, meta package manager
if [[ -s "$HOME/.asdf/asdf.sh" ]] ; then
    source "$HOME/.asdf/asdf.sh"
fi

# virtualenv
# Prefer home dir path, more often up to date
venv_script="$HOME/.local/bin/virtualenvwrapper.sh"
if [[ -f "$venv_script" ]]; then
    source "$venv_script"
elif [[ -e "/usr/bin/virtualenvwrapper.sh" ]]; then
    source "/usr/bin/virtualenvwrapper.sh"
fi


# rustlang dev config
. "$HOME/.cargo/env"
